{% extends 'landing.html' %}
{% load static %}

{% block title %}Crear Cuenta - TICKERFISHER{% endblock %}

{% block content %}
<section class="register-hero">
    <h1>Únete a TICKERFISHER</h1>
    <p>Acceso exclusivo a los mejores eventos corporativos, culturales y deportivos</p>
</section>

<section class="register-section">
    <div class="register-container">
        <div class="register-card">
            <h2>Crear Nueva Cuenta</h2>
            
            {% if messages %}
                {% for message in messages %}
                    <div class="alert-message alert-{{ message.tags }}">
                        <span>{{ message }}</span>
                        <button type="button" class="alert-close">&times;</button>
                    </div>
                {% endfor %}
            {% endif %}

            <form method="post" class="register-form">
                {% csrf_token %}

                <div class="form-row">
                    <div class="form-group">
                        <label for="{{ form.first_name.id_for_label }}">Nombre</label>
                        {{ form.first_name }}
                        {% if form.first_name.errors %}
                            <span class="error-text">{{ form.first_name.errors.0 }}</span>
                        {% endif %}
                    </div>
                    
                    <div class="form-group">
                        <label for="{{ form.last_name.id_for_label }}">Apellido</label>
                        {{ form.last_name }}
                        {% if form.last_name.errors %}
                            <span class="error-text">{{ form.last_name.errors.0 }}</span>
                        {% endif %}
                    </div>
                </div>

                <div class="form-group">
                    <label for="{{ form.email.id_for_label }}">Correo Electrónico</label>
                    {{ form.email }}
                    {% if form.email.errors %}
                        <span class="error-text">{{ form.email.errors.0 }}</span>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.username.id_for_label }}">
                        <strong>Tu Nombre de Usuario</strong>
                        <small>(Elige uno único y personalizado)</small>
                    </label>
                    {{ form.username }}
                    {% if form.username.errors %}
                        <span class="error-text">{{ form.username.errors.0 }}</span>
                    {% endif %}
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="{{ form.password1.id_for_label }}">Contraseña</label>
                        {{ form.password1 }}
                        {% if form.password1.errors %}
                            <span class="error-text">{{ form.password1.errors.0 }}</span>
                        {% endif %}
                    </div>
                    
                    <div class="form-group">
                        <label for="{{ form.password2.id_for_label }}">Confirmar Contraseña</label>
                        {{ form.password2 }}
                        {% if form.password2.errors %}
                            <span class="error-text">{{ form.password2.errors.0 }}</span>
                        {% endif %}
                    </div>
                </div>

                <div class="form-group role-selection">
                    <label>Selecciona tu Tipo de Cuenta</label>

                    <div class="role-options">
                        {% for radio in form.rol %}
                            <div class="role-card" data-value="{{ radio.data.value }}">
                                {{ radio.tag }}

                                <div class="role-content">
                                    <strong class="role-title">
                                        {{ radio.choice_label|upper }}
                                    </strong>

                                    <small class="role-desc">
                                        {% if radio.choice_label == 'usuario' %}
                                            Asistente a eventos
                                        {% elif radio.choice_label == 'organizador' %}
                                            Organizador de eventos
                                        {% endif %}
                                    </small>
                                </div>
                            </div>
                        {% endfor %}
                    </div>

                    {% if form.rol.errors %}
                        <span class="error-text">{{ form.rol.errors.0 }}</span>
                    {% endif %}
                </div>

                <button type="submit" class="btn-register">CREAR CUENTA</button>
            </form>

            <h3>Beneficios Exclusivos</h3>
            <ul class="benefits-list">
                <li>
                    <span class="benefit-icon">✓</span>
                    <div>
                        <strong>Acceso Premium</strong>
                        <p>Primero en venta de entradas a eventos exclusivos</p>
                    </div>
                </li>
                <li>
                    <span class="benefit-icon">✓</span>
                    <div>
                        <strong>Historial Seguro</strong>
                        <p>Gestiona todas tus reservas en un solo lugar</p>
                    </div>
                </li>
                <li>
                    <span class="benefit-icon">✓</span>
                    <div>
                        <strong>Soporte 24/7</strong>
                        <p>Equipo de atención disponible en cualquier momento</p>
                    </div>
                </li>
                <li>
                    <span class="benefit-icon">✓</span>
                    <div>
                        <strong>Ofertas Especiales</strong>
                        <p>Descuentos exclusivos para miembros registrados</p>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</section>

{% block extra_js %}
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const roleCards = document.querySelectorAll(".role-card");

        roleCards.forEach(card => {
            card.addEventListener("click", function() {
                const radio = this.querySelector("input[type='radio']");
                radio.checked = true;

                roleCards.forEach(c => c.classList.remove("selected"));
                this.classList.add("selected");
            });
        });
    });
</script>
{% endblock %}
{% endblock %}